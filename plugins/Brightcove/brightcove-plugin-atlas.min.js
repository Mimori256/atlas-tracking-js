videojs.registerPlugin("atlasTracking",function(t){function i(t,e){window.top.postMessage({isAtlasEvent:!0,action:t,category:"video",attributes:JSON.stringify(function(t){if(t)return{media:{name:t.mediainfo.name,is_fullscreen:t.isFullscreen(),src:t.currentSrc()||"na",id:t.id()||"na",autoplay:t.autoplay()||!1,muted:t.muted()||!1,type:t.currentType()||void 0,width:t.videoWidth()||void 0,height:t.videoHeight()||void 0,duration:t.duration(),current_time:Math.round(10*t.currentTime())/10,played_percent:Math.round(t.currentTime()/t.duration()*100),tag:"video-js",dataset:t.tagAttributes}}}(e.target.player))},"*")}var n=t&&t.heartbeat?t.heartbeat:5,a={};this.on("play",function(t){i("play",t)}),this.on("pause",function(t){i("pause",t)}),this.on("ended",function(t){i("end",t)}),this.on("timeupdate",function(t){var e=t.target.player.currentSrc();if(a[e])return!1;a[e]=setTimeout(function(){!0!==t.target.paused&&!0!==t.target.ended&&i("playing",t),a[e]=!1},1e3*n)})});